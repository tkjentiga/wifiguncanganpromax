<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wifi Guncangan Promax</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Menggunakan font Inter */
        html { font-family: 'Inter', sans-serif; }
        /* Mengatur agar konten utama tidak tertutup header/footer */
        #app-content {
            padding-top: 64px; /* Tinggi header */
            padding-bottom: 72px; /* Tinggi navbar bawah */
            min-height: 100vh;
        }
        /* Style untuk CMS form - Warna utama diubah menjadi sky blue */
        .cms-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
        }
        .cms-btn {
            /* Sky 500 */
            background-color: #0ea5e9;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .cms-btn:hover {
            /* Sky 600 */
            background-color: #0284c7;
        }
        /* Kelas untuk scrollbar tersembunyi (opsional) */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header (Static Top) -->
    <header class="fixed top-0 left-0 right-0 bg-white shadow-md z-10">
        <div class="max-w-screen-md mx-auto p-3 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <!-- Logo Sederhana (Emoji) - Internal Asset -->
                <span class="text-3xl text-sky-500 font-bold">âš¡</span>
                <h1 class="text-xl font-bold text-gray-800">WIFI GUNCANGAN PROMAX</h1>
            </div>
            <div id="loading-indicator" class="hidden text-sm text-sky-500 font-semibold animate-pulse">
                Memproses...
            </div>
        </div>
    </header>

    <!-- Content Area -->
    <main id="app-content" class="max-w-screen-md mx-auto p-4 transition-opacity duration-300">
        <!-- Konten akan dimuat di sini oleh JavaScript -->
        <h2 class="text-2xl font-bold text-center mt-10 text-gray-600">Memuat...</h2>
    </main>

    <!-- Bottom Navigation Bar (Static Bottom) -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-10">
        <div class="max-w-screen-md mx-auto flex justify-around items-center h-16">
            <!-- Warna aktif diubah menjadi text-sky-500 -->
            <button class="nav-item flex flex-col items-center p-2 text-sky-500 transition-colors" data-view="home">
                <i class="fas fa-home text-xl"></i>
                <span class="text-xs font-medium">Beranda</span>
            </button>
            <!-- Warna hover diubah menjadi hover:text-sky-500 -->
            <button class="nav-item flex flex-col items-center p-2 text-gray-500 hover:text-sky-500 transition-colors" data-view="products">
                <i class="fas fa-wifi text-xl"></i>
                <span class="text-xs font-medium">Voucher</span>
            </button>
            <button class="nav-item flex flex-col items-center p-2 text-gray-500 hover:text-sky-500 transition-colors" data-view="staff">
                <i class="fas fa-users text-xl"></i>
                <span class="text-xs font-medium">Pengurus</span>
            </button>
            <button class="nav-item flex flex-col items-center p-2 text-gray-500 hover:text-sky-500 transition-colors" data-view="cms">
                <i class="fas fa-cog text-xl"></i>
                <span class="text-xs font-medium">CMS</span>
            </button>
        </div>
    </nav>

    <script>
        // GLOBAL VARIABLES
        let data = {
            products: [],
            staff: [],
            orders: [],
            isCMSLoggedIn: false,
            cmsPassword: "admin123" // Password sederhana untuk demo
        };

        const APP_ID = typeof __app_id !== 'undefined' ? __app_id : 'wifi-guncangan-promax-default'; // Menggunakan ID Aplikasi dari Canvas
        const appContent = document.getElementById('app-content');
        const loadingIndicator = document.getElementById('loading-indicator');
        let currentView = 'home';
        
        // --- BASE PATH / BASE URLS ---
        
        // GANTI URL PLACEHOLDER INI DENGAN PATH RELATIF ANDA (misalnya: "images/maskot.png")
        // JIKA ANDA MENGUJI LOKAL DAN MEMILIKI FOLDER 'images'
        const MASKOT_IMAGE_URL = "poster.jpg";
        
        // URL PLACEHOLDER DEFAULT UNTUK FOTO STAF. GANTI DENGAN PATH RELATIF (misalnya: "images/foto_default.jpg")
        const DEFAULT_STAFF_PHOTO_URL = "https://placehold.co/150x150/0ea5e9/ffffff?text=FOTO";


        // --- FIREBASE SIMULATION (menggunakan localStorage) ---

        function loadData() {
            try {
                const storedData = localStorage.getItem(APP_ID + '_data');
                if (storedData) {
                    // Jika data sudah ada di localStorage, muat data yang tersimpan
                    data = JSON.parse(storedData);
                    // Pastikan semua array ada
                    data.products = data.products || [];
                    data.staff = data.staff || [];
                    data.orders = data.orders || [];

                    // PENTING: Jika data produk kosong
                    if (data.products.length === 0) {
                        initializeNewProducts();
                    }
                    
                    // Jika data staff kosong, inisialisasi ulang
                    if (data.staff.length === 0) {
                        initializeNewStaff();
                    }
                    
                    // Jika ada inisialisasi yang terjadi, simpan
                    if (data.products.length === 0 || data.staff.length > 0) {
                         saveData();
                    }


                } else {
                    // Data Awal jika LocalStorage kosong
                    initializeNewProducts(); // Inisialisasi produk baru
                    initializeNewStaff(); // Inisialisasi staff baru
                    data.orders = [];
                    saveData();
                }
            } catch (error) {
                console.error("Gagal memuat data dari LocalStorage:", error);
            }
        }
        
        // Fungsi inisialisasi produk baru sesuai permintaan
        function initializeNewProducts() {
            data.products = [
                // Paket 1: 3 Jam (2.000)
                { id: 1, name: "Voucher Harian - Hemat", speed: "5 Mbps", duration: "3 Jam", price: 2000, whatsappText: "Halo, saya ingin memesan Paket 3 Jam (Rp 2.000)." },
                // Paket 2: 6 Jam (3.000)
                { id: 2, name: "Voucher Harian - Standar", speed: "10 Mbps", duration: "6 Jam", price: 3000, whatsappText: "Halo, saya ingin memesan Paket 6 Jam (Rp 3.000)." },
                // Paket 3: 12 Jam (5.000)
                { id: 3, name: "Voucher Harian - Jumbo", speed: "15 Mbps", duration: "12 Jam", price: 5000, whatsappText: "Halo, saya ingin memesan Paket 12 Jam (Rp 5.000)." },
            ];
        }


        // Fungsi inisialisasi staf baru (Menggunakan URL/Path yang bisa diubah)
        function initializeNewStaff() {
            // PERBAIKAN: Menggunakan URL/Path yang fleksibel
            const newStaffList = [
                // JIKA MENGGUNAKAN PATH LOKAL: Ganti 'DEFAULT_STAFF_PHOTO_URL' dengan path relatif, cth: "images/alda.jpg"
                { id: 101, name: "Alda Fauzia Setiani", position: "Anggota", photo: alda.jpg },
                { id: 102, name: "Bilkis Kumairoh", position: "Anggota", photo: bil.jpg },
                { id: 103, name: "Juariah", position: "Anggota", photo: juu.jpg },
                { id: 104, name: "Kaila Okta Syahrini", position: "Anggota", photo: kai.jpg },
                { id: 105, name: "Kartini", position: "Anggota", photo: kar.jpg },
                { id: 106, name: "Siti Maesaroh", position: "Anggota", photo: mai.jpg },
            ];
            data.staff = newStaffList;
        }

        function saveData() {
            try {
                localStorage.setItem(APP_ID + '_data', JSON.stringify(data));
            } catch (error) {
                console.error("Gagal menyimpan data ke LocalStorage:", error);
            }
        }

        function showLoading(show) {
            loadingIndicator.classList.toggle('hidden', !show);
            appContent.classList.toggle('opacity-50', show);
            appContent.classList.toggle('pointer-events-none', show);
        }

        // --- ORDERING FUNCTION ---
        function handleOrder(productId) {
            const product = data.products.find(p => p.id === productId);
            if (!product) return console.error("Produk tidak ditemukan.");

            const phoneNumber = "6281234567890"; // GANTI DENGAN NOMOR WHATSAPP ANDA
            const message = encodeURIComponent(product.whatsappText + "\n\n(Mohon sertakan nama dan alamat lengkap Anda untuk pengiriman voucher/instalasi).");
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;

            // SIMULASI PENCATATAN ORDER KE 'DATABASE'
            const newOrder = {
                id: Date.now(),
                productName: product.name,
                price: product.price,
                timestamp: new Date().toISOString(),
                status: 'Menunggu Konfirmasi WA'
            };
            data.orders.push(newOrder);
            saveData();

            // Tampilkan notifikasi dan alihkan ke WhatsApp
            showMessage("Pemesanan otomatis!", `Anda akan dialihkan ke WhatsApp untuk memesan: ${product.name}. Order telah dicatat.`);
            setTimeout(() => {
                window.open(whatsappUrl, '_blank');
            }, 1500);
        }

        // --- MESSAGE BOX (Pengganti alert()) ---
        function showMessage(title, message) {
            const messageBox = document.createElement('div');
            messageBox.id = 'custom-message-box';
            messageBox.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            messageBox.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full text-center transform transition-all scale-100 duration-300">
                    <!-- Warna diubah menjadi sky-600 -->
                    <h3 class="text-xl font-bold mb-2 text-sky-600">${title}</h3>
                    <p class="text-gray-700 mb-4">${message}</p>
                    <!-- Warna tombol diubah menjadi sky-500 -->
                    <button id="close-message" class="cms-btn bg-sky-500 hover:bg-sky-600 w-full">OK</button>
                </div>
            `;
            document.body.appendChild(messageBox);
            
            document.getElementById('close-message').onclick = () => {
                messageBox.remove();
            };
        }


        // --- VIEW RENDERING FUNCTIONS ---

        function updateNav(view) {
            document.querySelectorAll('.nav-item').forEach(btn => {
                // Warna aktif diubah
                if (btn.getAttribute('data-view') === view) {
                    btn.classList.add('text-sky-500');
                    btn.classList.remove('text-gray-500', 'hover:text-sky-500');
                } else {
                    btn.classList.remove('text-sky-500');
                    btn.classList.add('text-gray-500', 'hover:text-sky-500');
                }
            });
            currentView = view;
        }

        function navigate(view) {
            showLoading(true);
            setTimeout(() => {
                updateNav(view);
                switch (view) {
                    case 'products':
                        renderProducts();
                        break;
                    case 'staff':
                        renderStaff();
                        break;
                    case 'cms':
                        if (data.isCMSLoggedIn) {
                            renderCMSDashboard();
                        } else {
                            renderCMSLogin();
                        }
                        break;
                    case 'home':
                    default:
                        renderHome();
                }
                showLoading(false);
            }, 300); // Simulasi waktu loading
        }

        // 1. HOME VIEW
        function renderHome() {
            appContent.innerHTML = `
                <section class="text-center p-6 bg-white rounded-xl shadow-lg mb-8">
                    <div class="text-5xl mb-4">ðŸš€</div>
                    <!-- Warna diubah menjadi sky-600 -->
                    <h2 class="text-3xl font-extrabold text-sky-600 mb-2">Selamat Datang!</h2>
                    <p class="text-gray-600 mb-4">Rasakan koneksi tercepat dan stabil bersama Wifi Guncangan Promax. Pilihan voucher yang fleksibel untuk kebutuhan internet Anda.</p>
                    <button onclick="navigate('products')" class="cms-btn bg-sky-500 hover:bg-sky-600">Lihat Semua Voucher</button>
                </section>

                <!-- POSTER / PAMPHLET SECTION (Menggunakan background SVG internal) -->
                <section class="mb-8 p-6 bg-sky-700 rounded-xl shadow-2xl relative overflow-hidden">
                    <div class="absolute inset-0 opacity-10 bg-repeat" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMjEgMEw0MCAwTDQwIDIwTDYwIDIwTDIwIDYwTDMyIDQ4TDMwIDM0TDIwIDM0TDIwIDI0TDM2IDI0TDM2IDMyTDQ4IDIwTDIwIDM2TDIwIDYwTDBfNjBMMzAyNkwtMjAgMjZMNC0yTDItMTRMMjEgMEwiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPjwvZz48L2c+PC9zdmc+')"></div>
                    
                    <div class="relative z-10 text-white text-center">
                        <h3 class="text-4xl font-extrabold mb-1 tracking-wider uppercase text-yellow-300 transform -rotate-1 skew-x-3">
                            PROMO VOUCHER GILA!
                        </h3>
                        <p class="text-xl font-semibold mb-4 text-white">Dapatkan koneksi secepat kilat dengan harga termurah!</p>

                        <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6">
                            <!-- Voucher 2K -->
                            <div class="bg-white text-sky-700 p-3 rounded-lg shadow-xl border-b-4 border-red-500 w-full sm:w-1/3">
                                <p class="text-2xl font-black">2.000</p>
                                <p class="text-sm font-semibold">3 Jam Nonstop</p>
                            </div>
                            <!-- Voucher 3K -->
                            <div class="bg-white text-sky-700 p-3 rounded-lg shadow-xl border-b-4 border-red-500 w-full sm:w-1/3">
                                <p class="text-2xl font-black">3.000</p>
                                <p class="text-sm font-semibold">6 Jam Nonstop</p>
                            </div>
                            <!-- Voucher 5K -->
                            <div class="bg-white text-sky-700 p-3 rounded-lg shadow-xl border-b-4 border-red-500 w-full sm:w-1/3">
                                <p class="text-2xl font-black">5.000</p>
                                <p class="text-sm font-semibold">12 Jam Nonstop</p>
                            </div>
                        </div>
                        
                        <button onclick="navigate('products')" class="cms-btn bg-yellow-400 text-sky-800 hover:bg-yellow-300 font-bold mt-2">
                            <i class="fas fa-arrow-alt-circle-right mr-2"></i> LIHAT DETAIL PAKET
                        </button>
                    </div>
                </section>
                <!-- END POSTER SECTION -->
                
                <!-- PORTRAIT IMAGE SECTION (Menggunakan MASKOT_IMAGE_URL) -->
                <section class="mb-8 p-4 text-center">
                    <img 
                        src="${MASKOT_IMAGE_URL}" 
                        alt="Maskot Layanan Wifi" 
                        class="w-48 h-72 object-cover mx-auto rounded-xl shadow-2xl border-4 border-white transform hover:scale-105 transition-transform duration-300"
                    />
                    <p class="mt-4 text-gray-500 text-sm font-medium">Koneksi stabil, harga bersahabat. Segera hubungi pengurus!</p>
                </section>
                <!-- END IMAGE SECTION -->

                <section class="mb-8">
                    <!-- Warna diubah menjadi sky-500 -->
                    <h3 class="text-2xl font-bold mb-4 border-l-4 border-sky-500 pl-3">Mengapa Memilih Kami?</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-xl shadow-md text-center">
                            <i class="fas fa-bolt text-3xl text-yellow-500 mb-2"></i>
                            <p class="font-semibold">Kecepatan Maksimal</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl shadow-md text-center">
                            <i class="fas fa-lock text-3xl text-green-500 mb-2"></i>
                            <p class="font-semibold">Koneksi Stabil</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl shadow-md text-center">
                            <i class="fas fa-headset text-3xl text-red-500 mb-2"></i>
                            <p class="font-semibold">Layanan Cepat</p>
                        </div>
                    </div>
                </section>

                <section>
                    <!-- Warna diubah menjadi sky-500 -->
                    <h3 class="text-2xl font-bold mb-4 border-l-4 border-sky-500 pl-3">Lokasi Kami</h3>
                    <div class="bg-white p-4 rounded-xl shadow-md">
                        <!-- Placeholder Map/Alamat -->
                        <p class="text-gray-600">Kami melayani area Cikande dan sekitarnya. Hubungi pengurus kami untuk instalasi!</p>
                        <!-- Warna diubah menjadi sky-500 -->
                        <button onclick="navigate('staff')" class="mt-3 text-sm text-sky-500 hover:text-sky-700 font-semibold">Lihat Kontak Pengurus &rarr;</button>
                    </div>
                </section>
            `;
        }

        // 2. PRODUCTS VIEW (Vouchers)
        function renderProducts() {
            let productsHtml = data.products.map(p => `
                <!-- Warna border diubah menjadi sky-500 -->
                <div class="bg-white p-5 rounded-xl shadow-lg border-t-4 border-sky-500 transform hover:scale-[1.02] transition-transform duration-300">
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="text-xl font-bold text-gray-800">${p.name}</h4>
                        <!-- Warna diubah menjadi sky-600 -->
                        <div class="text-3xl font-extrabold text-sky-600">Rp ${p.price.toLocaleString('id-ID')}</div>
                    </div>
                    <ul class="list-disc list-inside text-gray-600 space-y-1 mb-4">
                        <li class="text-sky-500">Kecepatan: <span class="font-semibold text-blue-500">${p.speed}</span></li>
                        <li>Durasi: <span class="font-semibold">${p.duration}</span></li>
                        <li>Untuk: 1 Perangkat</li>
                    </ul>
                    <!-- Warna tombol WA tetap hijau untuk identitas brand WA -->
                    <button onclick="handleOrder(${p.id})" class="cms-btn bg-green-500 hover:bg-green-600 w-full flex items-center justify-center space-x-2">
                        <i class="fab fa-whatsapp"></i>
                        <span>Pesan Otomatis via WA</span>
                    </button>
                </div>
            `).join('');

            appContent.innerHTML = `
                <h2 class="text-3xl font-bold mb-6 text-center text-gray-700">Daftar Voucher Wifi</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    ${productsHtml}
                </div>
            `;
        }

        // 3. STAFF VIEW (Pengurus)
        function renderStaff() {
            let staffHtml = data.staff.map(s => `
                <div class="bg-white p-5 rounded-xl shadow-lg text-center flex flex-col items-center">
                    <!-- Menggunakan path/URL dari data staf -->
                    <img src="${s.photo}" alt="${s.name}" class="w-24 h-24 object-cover rounded-full mb-3 border-4 border-sky-200 shadow-md">
                    <h4 class="text-lg font-bold text-gray-800">${s.name}</h4>
                    <!-- Warna diubah menjadi sky-600 -->
                    <p class="text-sky-600 font-semibold">${s.position}</p>
                    <p class="text-sm text-gray-500 mt-2">ID: ${s.id}</p>
                </div>
            `).join('');

            appContent.innerHTML = `
                <h2 class="text-3xl font-bold mb-6 text-center text-gray-700">Anggota Pengurus Website</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-6">
                    ${staffHtml}
                </div>
            `;
        }

        // 4. CMS LOGIN VIEW
        function renderCMSLogin() {
            appContent.innerHTML = `
                <div class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-2xl mt-10">
                    <!-- Warna diubah menjadi sky-600 -->
                    <h2 class="text-3xl font-bold mb-6 text-center text-sky-600">CMS Login</h2>
                   
                    <input type="password" id="cms-password" class="cms-input" placeholder="Masukkan Password CMS">
                    <!-- Warna tombol diubah menjadi sky-500 (menggunakan cms-btn) -->
                    <button onclick="loginCMS()" class="cms-btn w-full">Masuk ke Dashboard</button>
                </div>
            `;
        }

        function loginCMS() {
            const passwordInput = document.getElementById('cms-password');
            if (passwordInput.value === data.cmsPassword) {
                data.isCMSLoggedIn = true;
                renderCMSDashboard();
            } else {
                showMessage("Login Gagal", "Password yang Anda masukkan salah.");
            }
        }

        function logoutCMS() {
            data.isCMSLoggedIn = false;
            navigate('cms');
            showMessage("Logout Berhasil", "Anda telah keluar dari CMS.");
        }


        // 5. CMS DASHBOARD VIEW
        function renderCMSDashboard() {
            appContent.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-2xl mb-8">
                    <!-- Warna diubah menjadi sky-600 -->
                    <div class="flex justify-between items-center mb-6 border-b pb-3">
                        <h2 class="text-3xl font-bold text-sky-600">CMS Dashboard</h2>
                        <button onclick="logoutCMS()" class="text-red-500 hover:text-red-700 font-semibold text-sm">Logout</button>
                    </div>

                    <!-- Tabs Menu -->
                    <div class="flex mb-6 border-b">
                        <!-- Warna aktif diubah menjadi bg-sky-500 -->
                        <button id="tab-products" class="tab-btn px-4 py-2 font-semibold text-white bg-sky-500 rounded-t-lg transition-colors" data-target="products-manager">Voucher (${data.products.length})</button>
                        <!-- Warna hover diubah menjadi hover:text-sky-500 -->
                        <button id="tab-staff" class="tab-btn px-4 py-2 font-semibold text-gray-600 hover:text-sky-500 transition-colors" data-target="staff-manager">Pengurus (${data.staff.length})</button>
                        <button id="tab-orders" class="tab-btn px-4 py-2 font-semibold text-gray-600 hover:text-sky-500 transition-colors" data-target="orders-manager">Order (${data.orders.length})</button>
                    </div>

                    <!-- Tab Content -->
                    <div id="cms-content">
                        <!-- Content will be rendered here -->
                    </div>
                </div>
            `;
            // Initialize tab logic
            document.querySelectorAll('.tab-btn').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.tab-btn').forEach(btn => {
                        // Mengganti warna tab saat tidak aktif
                        btn.classList.remove('bg-sky-500', 'text-white');
                        btn.classList.add('text-gray-600', 'hover:text-sky-500');
                    });
                    // Mengganti warna tab saat aktif
                    this.classList.add('bg-sky-500', 'text-white');
                    this.classList.remove('text-gray-600', 'hover:text-sky-500');

                    const target = this.getAttribute('data-target');
                    if (target === 'products-manager') renderCMSProducts();
                    if (target === 'staff-manager') renderCMSStaff();
                    if (target === 'orders-manager') renderCMSOrders();
                });
            });

            // Default view: Products
            renderCMSProducts();
        }

        // CMS: PRODUCTS MANAGER
        function renderCMSProducts() {
            const cmsContent = document.getElementById('cms-content');
            
            let productListHtml = data.products.map(p => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="p-3 font-semibold">${p.name}</td>
                    <td class="p-3">${p.speed} / ${p.duration}</td>
                    <td class="p-3">Rp ${p.price.toLocaleString('id-ID')}</td>
                    <td class="p-3 space-x-2 whitespace-nowrap">
                        <button onclick="editProduct(${p.id})" class="text-blue-500 hover:text-blue-700"><i class="fas fa-edit"></i></button>
                        <button onclick="deleteProduct(${p.id})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('');

            cmsContent.innerHTML = `
                <h3 class="text-2xl font-bold mb-4 text-gray-700 border-l-4 border-blue-500 pl-3">Manajemen Voucher</h3>
                <!-- Warna tombol diubah menjadi sky-500 -->
                <button onclick="showProductForm()" class="cms-btn mb-4 bg-sky-500 hover:bg-sky-600"><i class="fas fa-plus mr-2"></i> Tambah Voucher</button>

                <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="min-w-full bg-white text-sm">
                        <thead class="bg-gray-200">
                            <tr>
                                <th class="p-3 text-left">Nama</th>
                                <th class="p-3 text-left">Spesifikasi</th>
                                <th class="p-3 text-left">Harga</th>
                                <th class="p-3 text-left">Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${productListHtml}
                        </tbody>
                    </table>
                </div>
                <div id="product-form-container" class="mt-8"></div>
            `;
        }

        function showProductForm(product = {}) {
            const container = document.getElementById('product-form-container');
            const isEdit = !!product.id;

            container.innerHTML = `
                <div class="bg-gray-100 p-6 rounded-xl shadow-inner border border-gray-300">
                    <!-- Warna diubah menjadi sky-600 -->
                    <h4 class="text-xl font-bold mb-4 text-sky-600">${isEdit ? 'Edit Voucher' : 'Tambah Voucher Baru'}</h4>
                    <form id="product-form" onsubmit="saveProduct(event, ${product.id || null})">
                        <input type="text" id="p-name" class="cms-input" placeholder="Nama Voucher (cth: Harian Premium)" value="${product.name || ''}" required>
                        <input type="text" id="p-speed" class="cms-input" placeholder="Kecepatan (cth: 20 Mbps)" value="${product.speed || ''}" required>
                        <input type="text" id="p-duration" class="cms-input" placeholder="Durasi (cth: 30 Hari)" value="${product.duration || ''}" required>
                        <input type="number" id="p-price" class="cms-input" placeholder="Harga (cth: 80000)" value="${product.price || ''}" required>
                        <textarea id="p-whatsappText" class="cms-input" rows="3" placeholder="Pesan WhatsApp Otomatis (cth: Halo, saya mau beli Voucher...)">${product.whatsappText || ''}</textarea>

                        <div class="flex space-x-2">
                            <!-- Warna tombol Simpan/Update tetap hijau untuk Success/Save -->
                            <button type="submit" class="cms-btn bg-green-500 hover:bg-green-600">${isEdit ? 'Update' : 'Simpan'}</button>
                            <button type="button" onclick="document.getElementById('product-form-container').innerHTML = ''" class="cms-btn bg-gray-500 hover:bg-gray-600">Batal</button>
                        </div>
                    </form>
                </div>
            `;
        }

        function saveProduct(event, id) {
            event.preventDefault();
            const form = event.target;
            const newProduct = {
                name: form.querySelector('#p-name').value,
                speed: form.querySelector('#p-speed').value,
                duration: form.querySelector('#p-duration').value,
                price: parseInt(form.querySelector('#p-price').value),
                whatsappText: form.querySelector('#p-whatsappText').value,
            };

            if (id) {
                // Edit
                const index = data.products.findIndex(p => p.id === id);
                if (index !== -1) {
                    data.products[index] = { ...data.products[index], ...newProduct };
                    showMessage("Berhasil", "Voucher berhasil diupdate!");
                }
            } else {
                // Tambah Baru
                newProduct.id = Date.now();
                data.products.push(newProduct);
                showMessage("Berhasil", "Voucher baru berhasil ditambahkan!");
            }
            saveData();
            renderCMSProducts();
        }

        function editProduct(id) {
            const product = data.products.find(p => p.id === id);
            if (product) showProductForm(product);
        }

        function deleteProduct(id) {
            data.products = data.products.filter(p => p.id !== id);
            saveData();
            renderCMSProducts();
            showMessage("Terhapus", "Voucher berhasil dihapus.");
        }

        // CMS: STAFF MANAGER
        function renderCMSStaff() {
            const cmsContent = document.getElementById('cms-content');

            let staffListHtml = data.staff.map(s => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="p-3 font-semibold">${s.name}</td>
                    <td class="p-3">${s.position}</td>
                    <!-- Gambar menggunakan s.photo (bisa path relatif atau URL) -->
                    <td class="p-3"><img src="${s.photo}" class="w-8 h-8 rounded-full inline-block" alt="Foto"></td>
                    <td class="p-3 space-x-2 whitespace-nowrap">
                        <button onclick="editStaff(${s.id})" class="text-blue-500 hover:text-blue-700"><i class="fas fa-edit"></i></button>
                        <button onclick="deleteStaff(${s.id})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('');

            cmsContent.innerHTML = `
                <h3 class="text-2xl font-bold mb-4 text-gray-700 border-l-4 border-blue-500 pl-3">Manajemen Pengurus</h3>
                <p class="text-sm text-gray-500 mb-4">Anda dapat menggunakan path relatif (contoh: <code>images/foto.jpg</code>) atau URL lengkap untuk gambar.</p>
                <!-- Warna tombol diubah menjadi sky-500 -->
                <button onclick="showStaffForm()" class="cms-btn mb-4 bg-sky-500 hover:bg-sky-600"><i class="fas fa-plus mr-2"></i> Tambah Pengurus</button>

                <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="min-w-full bg-white text-sm">
                        <thead class="bg-gray-200">
                            <tr>
                                <th class="p-3 text-left">Nama</th>
                                <th class="p-3 text-left">Posisi</th>
                                <th class="p-3 text-left">Foto</th>
                                <th class="p-3 text-left">Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${staffListHtml}
                        </tbody>
                    </table>
                </div>
                <div id="staff-form-container" class="mt-8"></div>
            `;
            // Re-bind to default staff tab
            document.getElementById('tab-staff').click();
        }

        function showStaffForm(staff = {}) {
            const container = document.getElementById('staff-form-container');
            const isEdit = !!staff.id;

            container.innerHTML = `
                <div class="bg-gray-100 p-6 rounded-xl shadow-inner border border-gray-300">
                    <!-- Warna diubah menjadi sky-600 -->
                    <h4 class="text-xl font-bold mb-4 text-sky-600">${isEdit ? 'Edit Pengurus' : 'Tambah Pengurus Baru'}</h4>
                    <form id="staff-form" onsubmit="saveStaff(event, ${staff.id || null})">
                        <input type="text" id="s-name" class="cms-input" placeholder="Nama Lengkap" value="${staff.name || ''}" required>
                        <input type="text" id="s-position" class="cms-input" placeholder="Posisi Kepengurusan" value="${staff.position || 'Anggota'}" required>
                        <!-- PENTING: Input ini dapat diisi dengan path relatif (images/nama.jpg) atau URL lengkap -->
                        <input type="text" id="s-photo" class="cms-input" placeholder="Path Gambar (cth: images/foto.jpg atau URL)" value="${staff.photo || DEFAULT_STAFF_PHOTO_URL}" required>

                        <div class="flex space-x-2">
                            <!-- Warna tombol Simpan/Update tetap hijau untuk Success/Save -->
                            <button type="submit" class="cms-btn bg-green-500 hover:bg-green-600">${isEdit ? 'Update' : 'Simpan'}</button>
                            <button type="button" onclick="document.getElementById('staff-form-container').innerHTML = ''" class="cms-btn bg-gray-500 hover:bg-gray-600">Batal</button>
                        </div>
                    </form>
                </div>
            `;
        }

        function saveStaff(event, id) {
            event.preventDefault();
            const form = event.target;
            const newStaff = {
                name: form.querySelector('#s-name').value,
                position: form.querySelector('#s-position').value,
                photo: form.querySelector('#s-photo').value,
            };
            
            if (id) {
                // Edit
                const index = data.staff.findIndex(s => s.id === id);
                if (index !== -1) {
                    data.staff[index] = { ...data.staff[index], ...newStaff };
                    showMessage("Berhasil", "Data pengurus berhasil diupdate!");
                }
            } else {
                // Tambah Baru
                newStaff.id = Date.now();
                data.staff.push(newStaff);
                showMessage("Berhasil", "Pengurus baru berhasil ditambahkan!");
            }
            saveData();
            renderCMSStaff();
        }

        function editStaff(id) {
            const staff = data.staff.find(s => s.id === id);
            if (staff) showStaffForm(staff);
        }

        function deleteStaff(id) {
            data.staff = data.staff.filter(s => s.id !== id);
            saveData();
            renderCMSStaff();
            showMessage("Terhapus", "Pengurus berhasil dihapus.");
        }

        // CMS: ORDERS MANAGER (Simulasi Log Pemesanan)
        function renderCMSOrders() {
            const cmsContent = document.getElementById('cms-content');

            let orderListHtml = data.orders.reverse().map(o => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="p-3 font-semibold">${o.productName}</td>
                    <td class="p-3">Rp ${o.price.toLocaleString('id-ID')}</td>
                    <td class="p-3">${new Date(o.timestamp).toLocaleString('id-ID')}</td>
                    <td class="p-3"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">${o.status}</span></td>
                </tr>
            `).join('');

            cmsContent.innerHTML = `
                <h3 class="text-2xl font-bold mb-4 text-gray-700 border-l-4 border-blue-500 pl-3">Log Pemesanan (Simulasi Spreadsheet)</h3>
                <p class="text-sm text-gray-500 mb-4">Ini adalah catatan pemesanan otomatis yang dikirimkan ke WhatsApp (simulasi database). Data ini disimpan di browser Anda.</p>

                <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="min-w-full bg-white text-sm">
                        <thead class="bg-gray-200">
                            <tr>
                                <th class="p-3 text-left">Produk</th>
                                <th class="p-3 text-left">Harga</th>
                                <th class="p-3 text-left">Waktu Order</th>
                                <th class="p-3 text-left">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${orderListHtml.length > 0 ? orderListHtml : `<tr><td colspan="4" class="text-center p-5 text-gray-500">Belum ada pemesanan yang tercatat.</td></tr>`}
                        </tbody>
                    </table>
                </div>
            `;
            // Re-bind to default orders tab
            document.getElementById('tab-orders').click();
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            navigate('home');

            // Event listener for bottom navigation
            document.querySelectorAll('.nav-item').forEach(button => {
                button.addEventListener('click', function() {
                    navigate(this.getAttribute('data-view'));
                });
            });
        });
    </script>
</body>
</html>
